
<div class="row">
	<div class="col-lg-12">
		<div id="container-upload" class="panel panel-default">
			<div class="panel-heading">Fazer Upload</div>
			<div id="tabela_container" style="display: flex; justify-content: center; align-items: center; " class="panel-body dataTable_wrapper">
				<div class="form-group" style="margin-bottom: 0;">
					<form id="formUpload" style='display: flex; flex-direction: column; align-items: center; justify-content: center;'>
						<div style="padding: 15px;">
							<label for="arquivoCSV">Escolher arquivo CSV:</label>
							<input type="file" accept=".csv" id="arquivoCSV" name="arquivoCSV" />
						
							<input id="importar" type="submit" value="Importar"/>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>


<script type="text/javascript">


	$("#formUpload").validate({
		
		
		rules: {
			
			arquivoCSV: {
				required: true
			}
			
		},
		
		submitHandler: function (form) {

			if ($.active) {
				return;
			}
			
			let opcoes = {
				
				url: "<%- root %>/aula/importar",
				method: "POST",
				data: new FormData(form),
				processData: false,
				contentType: false,

				success: function (dadosDeRetorno) {
					Notification.success("Upload realizado com sucesso! " + emoji.happy);
				},
				
				error: function () {
					Notification.error("Ocorreu algum erro...", true);
				}
				
			};
			
			$.ajax(opcoes);
		}
		
	});
</script>
